<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Anniversary!</title>
    <style>
        /* Base Styles */
        body { 
            font-family: 'Arial', sans-serif; 
            text-align: center; 
            background-color: #ffe6e6; 
            color: #333; 
            margin: 0;
            padding: 20px;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        .container { max-width: 500px; margin: auto; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
        
        /* Chest Styles */
        .chest {
            width: 90px; height: 70px; background: #8B4513; margin: auto;
            border-radius: 8px; cursor: pointer; display: flex;
            align-items: center; justify-content: center; font-size: 30px;
            transition: transform 0.1s; border: 4px solid #5D2E0C;
            -webkit-tap-highlight-color: transparent;
        }
        .chest:active { transform: scale(0.9); }
        .chest.open { background: #D2B48C; border-color: #A0522D; }
        
        .hidden { display: none; }

        /* THE SLIDING BIG TEXT SECTION */
        #final-msg {
            display: none; /* Starts hidden */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
            animation: slideUp 1.2s ease-out forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .big-love { font-size: 3.5rem; color: #ff4d6d; margin: 10px 0; font-weight: bold; }
        .sub-text { font-size: 1.8rem; font-weight: bold; color: #555; }
        .anniversary { font-size: 2.2rem; color: #ff4d6d; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <div id="game-content">
        <h1 id="level-title" style="font-size: 1.8rem;">Level 1: Find the key</h1>
        <p id="instruction">Tap a chest to look inside!</p>
        <div id="game-grid" class="grid"></div>
    </div>

    <div id="final-msg">
        <div style="font-size: 5rem;">üéÅ</div>
        <div class="big-love">I love youu!</div>
        <div class="sub-text">You found em all!</div>
        <div class="anniversary">Happy Anniversary Rohu meri jaan! üíï</div>
    </div>
</div>

<script>
    let currentLevel = 1;
    const grid = document.getElementById('game-grid');
    const title = document.getElementById('level-title');

    function startLevel(level) {
        grid.innerHTML = '';
        let numChests, keyIndex;

        if (level === 1) {
            numChests = 6;
            keyIndex = 3; // 4th box
        } else if (level === 2) {
            numChests = 12;
            keyIndex = 10; // 11th box
        } else if (level === 3) {
            numChests = 3;
            keyIndex = Math.floor(Math.random() * 3);
        }

        for (let i = 0; i < numChests; i++) {
            const chest = document.createElement('div');
            chest.classList.add('chest');
            chest.innerText = "üì¶";
            
            chest.onclick = () => {
                if (i === keyIndex) {
                    chest.innerText = "üîë";
                    chest.classList.add('open');
                    setTimeout(() => nextLevel(), 800);
                } else {
                    chest.innerText = "‚ùå";
                    chest.style.backgroundColor = "#ddd";
                    chest.onclick = null; // Prevent double clicking wrong ones
                }
            };
            grid.appendChild(chest);
        }
    }

    function nextLevel() {
        currentLevel++;
        if (currentLevel === 2) {
            title.innerText = "Level 2: 12 Chests";
            startLevel(2);
        } else if (currentLevel === 3) {
            title.innerText = "Level 3: The Final Key";
            startLevel(3);
        } else {
            // Hide game, show sliding message
            document.getElementById('game-content').style.display = 'none';
            document.getElementById('final-msg').style.display = 'flex';
        }
    }

    startLevel(1);
</script>
</body>
</html>
